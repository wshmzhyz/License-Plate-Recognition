# 项目简介

本项目实现了**车牌检测与识别系统**，支持本地运行及基于 Hadoop+Spark 的分布式部署，主要功能包括数据预处理、算法设计和 GUI 可视化界面。

---

## 核心功能

### 1. 数据预处理
- **车牌定位与字符分割**：
  - 实现车牌的自动定位及字符切割，为后续算法训练提供数据支持。
  - 工具代码如 `chepaijiance.py` 和 `zifuqiege.py` 仅作为参考资源，分布式 CRNN 直接使用定位后的数据。

### 2. 算法设计
- **MLP（多层感知机）分类器**：
  - 基于 Spark MLlib 编写，处理经过字符切割的车牌字符数据。
- **CRNN（卷积循环神经网络）模型**：
  - 基于 PyTorch + Horovod 编写，支持分布式深度学习训练，适用于复杂车牌字符的识别。
  - 提供 GPU 加速运行的本地代码版本，适用于环境配置较为简单的场景。

### 3. GUI 可视化
- 使用 `tkinter` 创建了一个简单的车牌识别应用程序，通过调用已训练好的模型实现车牌检测与识别。

---

## 项目特点
1. **完全分布式支持**：
   - MLP 与 CRNN 均可在分布式环境下运行。
   - 提供本地 CRNN 代码版本，简化复杂环境下的运行配置。
2. **训练性能优化**：
   - 提供 GPU 加速 CRNN 训练代码，本地 CPU 运行仅用于调试，训练单轮时间约 30 分钟。
3. **数据分析扩展**：
   - 提供基于 MapReduce 的车牌数据统计工具，包括生成车牌数量的柱状图和词云图。

---

## 文件结构

### 数据集
- **`数据集.zip`**：
  - **`final_train`**：车牌训练集（定位完成，未分割）。
  - **`final_test`**：车牌测试集（定位完成，未分割）。

### 本地 CRNN
- **`train.py`**：训练代码（支持 GPU 加速）。
- **`model.py`**：模型结构定义。
- **`mydataset.py`**：数据加载类。
- **说明文件**：
  - `final_train.txt`：训练集说明（需修改图片路径）。
  - `final_test.txt`：测试集说明（需修改图片路径）。

### 分布式版本
- **`rdd_mlp.py`**：多层感知机分类器代码（Spark）。
- **`train.py`**：CRNN 分布式训练代码。
- **`mydataset.py`**：支持 HDFS 的数据加载类。
- **`test.py`**：分布式训练完成后的测试代码。

### 数据分析工具
- **`mapreduce.py`**：车牌统计工具，生成车牌柱状图和词云图。

### GUI 可视化
- **`main_vis.py`**：车牌识别应用程序。
- **`getPlate.py`**：车牌定位与切割模块。
- **`predict.py`**：调用训练模型进行车牌识别。

---

## 环境配置要求

### 分布式环境
- **基础框架**：
  - Hadoop 2.10.2 + Spark 3.3.3。
  - Python ≥ 3.7。
- **深度学习框架**：
  - CUDA、NCCL（版本需匹配 GPU 驱动）。
  - PyTorch ≥ 1.5.0。
  - Horovod 分布式框架（推荐安装命令：`HOROVOD_GPU_OPERATIONS=NCCL pip install --no-cache-dir horovod[pytorch,spark]`）。
- **其他依赖库**：numpy、matplotlib、opencv。

### 本地运行
- **Python ≥ 3.7**。
- 安装 PyTorch 及基础依赖库即可运行 CRNN 模型。

---

## 注意事项
1. **CRNN 运行环境**：
   - 强烈建议在 GPU 加速环境下运行，否则训练时间过长。
2. **文件路径修改**：
   - 使用本地或分布式训练代码时需根据实际情况调整数据说明文件中的路径。
3. **分布式环境配置**：
   - 确保 Hadoop 和 Spark 配置正确，Horovod 环境中避免 OpenMPI 版本 3.1.3。

---

## 项目成果

### 模型性能
- 训练后的模型（`model.pth`）已完成性能验证。
- 提供 CRNN 损失曲线与准确率曲线（`loss.png`、`acc.png`）。

### 数据统计
- 基于 MapReduce 的车牌数据统计结果，包括词云图和柱状图。

### 错误样本
- 提供识别错误的车牌样本，便于改进模型。

---
